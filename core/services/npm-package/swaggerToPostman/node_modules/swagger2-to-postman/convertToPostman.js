var expect = require('expect.js'),
    Swagger2Postman = require('./convert.js'),
    fs = require('fs'),
    path = require('path');
console.log('__dirname'+__dirname);
const readline = require('readline');

const rl = readline.createInterface({
	  input: process.stdin,
	  output: process.stdout
	});

rl.question('Please enter valid path to swagger.json file', (answer) => {
	  
	  console.log(`Converting: ${answer}  to postmanJson`);

	  rl.close();
	  console.log('__dirname'+__dirname);
	  var samplePath = path.join(answer);
	  var swagger = require(samplePath),
	  	converter = new Swagger2Postman(),
	  	convertResult = converter.convert(swagger);
	  	console.log(convertResult);
	  var postmanJsonFile=path.join(answer.split('.')[0]+"-postman.json");
	  	
	  fs.writeFile(postmanJsonFile, JSON.stringify(convertResult), function(err) {
	  		if(err) {
	  			return console.log(err);
	  		}
    	   console.log("The file was saved! at "+ postmanJsonFile);
	});

});
    